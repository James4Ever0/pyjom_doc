{
    "4700": {
        "file_id": 609,
        "content": "/tests/bilibili_video_recommendation_server/ad_template_0.py",
        "type": "filepath"
    },
    "4701": {
        "file_id": 609,
        "content": "The code generates a bilibili video recommendation visual using Pixie library, involving avatars, rounded rectangles, and logos for the final image.",
        "type": "summary"
    },
    "4702": {
        "file_id": 609,
        "content": "# let's try to make it right.\npic_file = \"sample_cover.jpg\"\nqrcode_file = \"MyQRCode1.png\"\n# we need some font for this.\n# font_location = \"/usr/share/fonts/truetype/wqy/wqy-microhei.ttc\" # ttc -> ttf\nfont_location = \"./wqy-microhei0.ttf\"\nimport pixie\nfont = pixie.read_font(font_location)\nfont.size = 20\ntext = \"‰∏≠ÊñáËÉΩÂ§üÊòæÁ§∫‰πà Ë∂ÖÂá∫‰∫ÜÂ≠óÁ¨¶ËæπÁºòËÉΩ‰∏çËÉΩÊòæÁ§∫ Typesetting is the arrangement and composition of text in graphic design and publishing in both digital and traditional medias.\"\n# ÂèØ‰ª•ÊòæÁ§∫ ‰ΩÜÊòØËæπÁºòÁöÑÂ≠óÁ¨¶ÈúÄË¶ÅË¢´Ê≥®ÊÑèÂà∞ ÁúãÁúãÊòØ‰∏çÊòØË∂ÖÂá∫‰∫ÜËæπÁïå\nimage = pixie.Image(200, 200)\nimage.fill(pixie.Color(1, 1, 1, 1))\nimage.fill_text(\n    font, text, bounds=pixie.Vector2(180, 180), transform=pixie.translate(10, 10)\n)\n# print('image type:', type(image))\n# 'pixie.pixie.Image'\n# hard to say.\npath = pixie.Path()\npath.rounded_rect(0, 0, 100, 100, 25, 25, 25, 25)\n# how to use mask?\ncover_width, cover_height = 100, 100\nmask = pixie.Mask(cover_width, cover_height)  # must match mask size?\nmask.fill_path(path)\npicture = pixie.read_image(pic_file)\n# we need to reshape this.\npicture = picture.resize(",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/ad_template_0.py:1-36"
    },
    "4703": {
        "file_id": 609,
        "content": "Code snippet is trying to create an image with Chinese text and a rounded rectangle mask. It loads a font file, sets its size, fills the image with white color, draws text using the loaded font, creates a path for a rounded rectangle, generates a mask of the rectangle shape, reads an existing image (sample_cover.jpg), and aims to resize it while maintaining aspect ratio.",
        "type": "comment"
    },
    "4704": {
        "file_id": 609,
        "content": "    cover_width, cover_height\n)  # recommend to do this in pyjom.imagetoolbox since that will be safer.\npicture.mask_draw(mask)\ntransform = pixie.translate(50, 50)\nqrcode_width = qrcode_height = 50\nqrcode_image = pixie.read_image(qrcode_file)\nqrcode_image = qrcode_image.resize(qrcode_width, qrcode_height)\nqrcode_transform = pixie.translate(150, 150)\nimage.draw(picture, transform=transform)\n# image.draw(picture)\n# image.draw(picture,transform=transform)\nimage.draw(qrcode_image, transform=qrcode_transform)\n# now we try to reverse engineer that thing.\n# not only we need to create ads, we need to modify ads on the fly.\n# detect qr code and replace the code with ours.\n# first of all, the picture needs to be big.\navatar_path = \"up_image.jpg\"\nup_name = \"J4D\"\navatar_width, avatar_height = 50, 50\npath2 = pixie.Path()\npath2.circle(25, 25, 25)\nmask2 = pixie.Mask(avatar_width, avatar_height)\nmask2.fill_path(path2)\navatar = pixie.read_image(avatar_path)\navatar = avatar.resize(avatar_width, avatar_height)\navatar.mask_draw(mask2)",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/ad_template_0.py:37-73"
    },
    "4705": {
        "file_id": 609,
        "content": "The code creates an ad image with a QR code and avatar. It reads the QR code image, resizes it, and applies a mask. Then, it reads the avatar image, resizes it, and applies a mask as well. Finally, it combines these elements into the final ad image.",
        "type": "comment"
    },
    "4706": {
        "file_id": 609,
        "content": "a_transform = pixie.translate(25, 25)\nimage.draw(avatar, a_transform)\nfont2 = pixie.read_font(font_location)\nfont2.size = 40\nfont2.paint.color = pixie.Color(0, 0.5, 0.953125, 1)\nval = image.fill_text(font2, up_name, transform=pixie.translate(25 + 50, 20))\n# print('VAL',val) # NONE\npath3 = pixie.Path()\npath3.rounded_rect(0,0,100,50,10,10,10,10)\npaint = pixie.Paint(pixie.SOLID_PAINT)\npaint.color = pixie.parse_color(\"#FC427B\")\ntransform3 = pixie.translate(25+50+50, 20)\nimage.fill_path(path3, paint, transform3)\nlabel_text = \"UP‰∏ª\"\nfont3 = pixie.read_font(font_location)\nfont3.size = 30\nfont3.paint.color = pixie.Color(1,1,1, 1)\nimage.fill_text(\n    font3, label_text, transform=pixie.translate(25 + 50 + 50, 20)\n)  # where should i put the thing?\nbilibili_logo_path = \"bilibili_transparent.png\"\nbilibili_logo = pixie.read_image(bilibili_logo_path)\nbilibili_logo = bilibili_logo.resize(50,100)\nimage.draw(bilibili_logo)\nplay_button_path = 'play_button.png'\nplay_button = pixie.read_image(play_button_path)\nplay_button = play_button.resize(50,50)",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/ad_template_0.py:74-110"
    },
    "4707": {
        "file_id": 609,
        "content": "This code section is responsible for generating a visual representation of a bilibili video recommendation. It uses the Pixie library to handle image manipulation and drawing, and involves steps such as drawing an avatar, painting text, creating a rounded rectangle, filling the shape, and adding logos. The final result is likely used in a user interface for displaying video recommendations.",
        "type": "comment"
    },
    "4708": {
        "file_id": 609,
        "content": "t4 = pixie.translate(100,100)\nimage.draw(play_button, t4)\n# so no more masking here. we need some png magic.\nimage.write_file(\"ad_0.png\")",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/ad_template_0.py:111-115"
    },
    "4709": {
        "file_id": 609,
        "content": "This code is translating a coordinate (100, 100) using Pixie, then drawing the play_button image over it. Since no more masking is needed, the resulting image is saved as \"ad_0.png\" using png magic.",
        "type": "comment"
    },
    "4710": {
        "file_id": 610,
        "content": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/view_qq.sh",
        "type": "filepath"
    },
    "4711": {
        "file_id": 610,
        "content": "This code is using the mitmproxy tool to read a log file named \"qq.log\" for analysis or debugging purposes.",
        "type": "summary"
    },
    "4712": {
        "file_id": 610,
        "content": "mitmproxy -r qq.log",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/view_qq.sh:1-1"
    },
    "4713": {
        "file_id": 610,
        "content": "This code is using the mitmproxy tool to read a log file named \"qq.log\" for analysis or debugging purposes.",
        "type": "comment"
    },
    "4714": {
        "file_id": 611,
        "content": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/view_bilibili_qq_share_xml.sh",
        "type": "filepath"
    },
    "4715": {
        "file_id": 611,
        "content": "The provided code is running \"mitmproxy\" and redirecting the log file named \"bilibili_qq_xml_share.log\". This likely involves capturing and analyzing network traffic between a client (possibly a Bilibili app) and their servers, potentially to study video recommendations or QQ sharing feature behavior.",
        "type": "summary"
    },
    "4716": {
        "file_id": 611,
        "content": "mitmproxy -r bilibili_qq_xml_share.log",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/view_bilibili_qq_share_xml.sh:1-1"
    },
    "4717": {
        "file_id": 611,
        "content": "The provided code is running \"mitmproxy\" and redirecting the log file named \"bilibili_qq_xml_share.log\". This likely involves capturing and analyzing network traffic between a client (possibly a Bilibili app) and their servers, potentially to study video recommendations or QQ sharing feature behavior.",
        "type": "comment"
    },
    "4718": {
        "file_id": 612,
        "content": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/upload_img2.py",
        "type": "filepath"
    },
    "4719": {
        "file_id": 612,
        "content": "This code utilizes the requests library for URL interactions, cookies, and binary file reading. It handles exact or archive-scale uploads based on URLs, with request headers providing metadata and content type info for image files, then sends POST requests with files, converting responses to JSON format.",
        "type": "summary"
    },
    "4720": {
        "file_id": 612,
        "content": "url = \"https://om.qq.com/image/orginalupload\"\n# php tencent: http://www.ygbks.com/2501.html gtimg\n# python sina: https://www.52pojie.cn/thread-1446200-1-1.html\n\"\"\"\nadd something like this in your website\n<img src='http://inews.gtimg.com/newsapp_ls/0/14966062446/0' width=\"200\"  referrerpolicy=\"no-referrer\" />\n\"\"\"\nfilePath = \"test_cover.jpg\"\nimport requests\n# with open(filepath, \"rb\") as f:\n#     content = f.read()\n# upload elsewhere.\nurl = \"https://om.qq.com/image/exactupload?relogin=1\"\npicUrl = \"https://open.gtimg.cn/open/app_icon/00/95/17/76/100951776_100_m.png\"\nurl = \"https://om.qq.com/image/archscaleupload?isRetImgAttr=1&relogin=1\"\ncookie = {\n\t\"alertclicked\": \"||\",\n\t\"appOmDownClose\": \"1\",\n\t\"csrfToken\": \"csrf-1666038340355\",\n\t\"iip\": \"0\",\n\t\"o_cookie\": \"917521610\",\n\t\"omaccesstoken\": \"00a8d53ee83b92ec4e3111998ca616ad566b9d6fe80814f1be12d2a5c1e7a267baf531f268514a1be2670c9e98da4549a31b36408ed199c6ccd0e069f62ba65438x0\",\n\t\"omtoken\": \"00a8d53ee83b92ec4e3111998ca616ad566b9d6fe80814f1be12d2a5c1e7a267baf531f268514a1be2670c9e98da4549a31b36408ed199c6ccd0e069f62ba65438x0\",",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/upload_img2.py:1-25"
    },
    "4721": {
        "file_id": 612,
        "content": "This code is making multiple requests to different URLs, likely for image uploading purposes. It uses the requests library to interact with the specified URLs and includes cookies for authentication. The code seems to involve various steps including reading a file, opening it in binary mode, and sending it for exact or archive scale upload depending on the URL.",
        "type": "comment"
    },
    "4722": {
        "file_id": 612,
        "content": "\t\"pac_uid\": \"1_917521610\",\n\t\"pgv_info\": \"ssid=s2914806624\",\n\t\"pgv_pvid\": \"977259220\",\n\t\"ptcz\": \"cff0fae128e230ac9cbdca6b44c812da07a8a27199142b3856073da30bd7d37f\",\n\t\"ptui_loginuin\": \"917521610@qq.com\",\n\t\"RK\": \"bNrVuDJjGZ\",\n\t\"ts_last\": \"om.qq.com/userReg/mediaInfo\",\n\t\"ts_uid\": \"6110293192\",\n\t\"TSID\": \"fg2om4ff3b0028rpbovnpafde1\",\n\t\"tvfe_boss_uuid\": \"ba12af7c5a70407c\",\n\t\"userid\": \"22690801\",\n\t\"wxky\": \"1\"\n}\ncookie_str = \"; \".join([\"{}:{}\".format(k, v) for k, v in cookie.items()])\nfiles = {\n    \"Filedata\": open(filePath, \"rb\"),\n    \"id\": \"WU_FILE_0\",\n    \"name\": \"test_cover.jpg\",\n    \"type\": \"image/jpeg\",\n    \"lastModifiedDate\": \"10/18/2022, 4:27:08 AM\",\n    'appKey':'1',\n    'isRetImgAttr':'1',\n    'from':'user',\n    'subModule':'userAuth_individual_head'\n}\nreq_headers = [\n\t\t\t{\n\t\t\t\t\"name\": \"Accept\",\n\t\t\t\t\"value\": \"*/*\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Accept-Encoding\",\n\t\t\t\t\"value\": \"gzip, deflate, br\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Accept-Language\",\n\t\t\t\t\"value\": \"en-US,en;q=0.5\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Connection\",\n\t\t\t\t\"value\": \"keep-alive\"\n\t\t\t},\n\t\t\t# {",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/upload_img2.py:26-68"
    },
    "4723": {
        "file_id": 612,
        "content": "The code is creating a request to upload an image file using the parameters provided in the cookie dictionary and request headers. The cookies are converted into a string format, and the image file is included with additional metadata in the files dictionary. The request headers include information about the desired content type, language preference, and connection type.",
        "type": "comment"
    },
    "4724": {
        "file_id": 612,
        "content": "\t\t\t# \t\"name\": \"Content-Length\",\n\t\t\t# \t\"value\": \"197582\"\n\t\t\t# },\n\t\t\t# {\n\t\t\t\t# \"name\": \"Content-Type\",\n\t\t\t\t# \"value\": \"multipart/form-data; boundary=---------------------------26791228924136332743854048233\"\n\t\t\t# },\n\t\t\t{ # do some cookie hook to get these data in playwright.\n\t\t\t\t\"name\": \"Cookie\",\n\t\t\t\t\"value\": \"userid=22690801; omaccesstoken=00a8d53ee83b92ec4e3111998ca616ad566b9d6fe80814f1be12d2a5c1e7a267baf531f268514a1be2670c9e98da4549a31b36408ed199c6ccd0e069f62ba65438x0\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Host\",\n\t\t\t\t\"value\": \"om.qq.com\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Origin\",\n\t\t\t\t\"value\": \"https://om.qq.com\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Referer\",\n\t\t\t\t\"value\": \"https://om.qq.com/userReg/mediaInfo\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Sec-Fetch-Dest\",\n\t\t\t\t\"value\": \"empty\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Sec-Fetch-Mode\",\n\t\t\t\t\"value\": \"cors\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Sec-Fetch-Site\",\n\t\t\t\t\"value\": \"same-origin\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"User-Agent\",\n\t\t\t\t\"value\": \"Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101 Firefox/91.0\"\n\t\t\t}\n\t\t]\nheaders = {item['name']: item['value'] for item in req_headers}",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/upload_img2.py:69-109"
    },
    "4725": {
        "file_id": 612,
        "content": "This code defines a list of request headers, each represented by a dictionary containing 'name' and 'value'. The 'headers' variable is then generated using a dictionary comprehension, mapping the header names to their respective values. This structured format can be used for making API requests or handling HTTP communication in a program.",
        "type": "comment"
    },
    "4726": {
        "file_id": 612,
        "content": "respone = requests.post(url, files=files,headers=headers)\nres = respone.json()\nprint(res)",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/upload_img2.py:110-112"
    },
    "4727": {
        "file_id": 612,
        "content": "This code sends a POST request to a specified URL, including files in the request body using Python's requests library. The response is then converted to JSON format and stored in 'res', which is printed for output.",
        "type": "comment"
    },
    "4728": {
        "file_id": 613,
        "content": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/upload_img.py",
        "type": "filepath"
    },
    "4729": {
        "file_id": 613,
        "content": "This Python script uses the requests library to upload an image to QQ platform, setting up necessary headers, cookies, and metadata for processing. It sends a POST request with session data and tokens to \"om.qq.com\" and prints the response in JSON format.",
        "type": "summary"
    },
    "4730": {
        "file_id": 613,
        "content": "url = \"https://om.qq.com/image/orginalupload\"\n# php tencent: http://www.ygbks.com/2501.html gtimg\n# python sina: https://www.52pojie.cn/thread-1446200-1-1.html\n\"\"\"\nadd something like this in your website\n<img src='http://inews.gtimg.com/newsapp_ls/0/14966062446/0' width=\"200\"  referrerpolicy=\"no-referrer\" />\n\"\"\"\nfilePath = \"test_cover.jpg\"\nimport requests\n# with open(filepath, \"rb\") as f:\n#     content = f.read()\n# upload elsewhere.\nurl = \"https://om.qq.com/image/exactupload?relogin=1\"\npicUrl = \"https://open.gtimg.cn/open/app_icon/00/95/17/76/100951776_100_m.png\"\nurl = \"https://om.qq.com/image/archscaleupload?isRetImgAttr=1&relogin=1\"\ncookie = {\n\t\"alertclicked\": \"||\",\n\t\"appOmDownClose\": \"1\",\n\t\"csrfToken\": \"csrf-1666038340355\",\n\t\"iip\": \"0\",\n\t\"o_cookie\": \"917521610\",\n\t\"omaccesstoken\": \"00a8d53ee83b92ec4e3111998ca616ad566b9d6fe80814f1be12d2a5c1e7a267baf531f268514a1be2670c9e98da4549a31b36408ed199c6ccd0e069f62ba65438x0\",\n\t\"omtoken\": \"00a8d53ee83b92ec4e3111998ca616ad566b9d6fe80814f1be12d2a5c1e7a267baf531f268514a1be2670c9e98da4549a31b36408ed199c6ccd0e069f62ba65438x0\",",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/upload_img.py:1-25"
    },
    "4731": {
        "file_id": 613,
        "content": "This code is attempting to upload an image to the QQ platform using Python. It first specifies the URL for uploading the image and provides a file path for the image. Then, it imports the requests library to handle the HTTP request for uploading the image. The code includes several different URLs for various types of uploads, as well as a dictionary of cookies necessary for authentication during the upload process.",
        "type": "comment"
    },
    "4732": {
        "file_id": 613,
        "content": "\t\"pac_uid\": \"1_917521610\",\n\t\"pgv_info\": \"ssid=s2914806624\",\n\t\"pgv_pvid\": \"977259220\",\n\t\"ptcz\": \"cff0fae128e230ac9cbdca6b44c812da07a8a27199142b3856073da30bd7d37f\",\n\t\"ptui_loginuin\": \"917521610@qq.com\",\n\t\"RK\": \"bNrVuDJjGZ\",\n\t\"ts_last\": \"om.qq.com/userReg/mediaInfo\",\n\t\"ts_uid\": \"6110293192\",\n\t\"TSID\": \"fg2om4ff3b0028rpbovnpafde1\",\n\t\"tvfe_boss_uuid\": \"ba12af7c5a70407c\",\n\t\"userid\": \"22690801\",\n\t\"wxky\": \"1\"\n}\ncookie_str = \";\".join([\"{}:{}\".format(k, v) for k, v in cookie.items()])\nfiles = {\n    \"Filedata\": open(filePath, \"rb\"),\n    \"id\": \"WU_FILE_0\",\n    \"name\": \"test_cover.jpg\",\n    \"type\": \"image/jpeg\",\n    \"lastModifiedDate\": \"10/18/2022, 4:27:08 AM\",\n    'appKey':'1',\n    'isRetImgAttr':'1',\n    'from':'user',\n    'subModule':'userAuth_individual_head'\n}\nreq_headers = [\n\t\t\t{\n\t\t\t\t\"name\": \"Accept\",\n\t\t\t\t\"value\": \"*/*\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Accept-Encoding\",\n\t\t\t\t\"value\": \"gzip, deflate, br\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Accept-Language\",\n\t\t\t\t\"value\": \"en-US,en;q=0.5\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Connection\",\n\t\t\t\t\"value\": \"keep-alive\"\n\t\t\t},\n\t\t\t# {",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/upload_img.py:26-68"
    },
    "4733": {
        "file_id": 613,
        "content": "This code sends an image file to the server for processing. It sets up necessary headers, converts cookie data into a string format, and includes relevant information like user IDs and timestamps in the request. The image is sent with additional metadata such as app key, ret img attr, and source module.",
        "type": "comment"
    },
    "4734": {
        "file_id": 613,
        "content": "\t\t\t# \t\"name\": \"Content-Length\",\n\t\t\t# \t\"value\": \"197582\"\n\t\t\t# },\n\t\t\t# {\n\t\t\t\t# \"name\": \"Content-Type\",\n\t\t\t\t# \"value\": \"multipart/form-data; boundary=---------------------------26791228924136332743854048233\"\n\t\t\t# },\n\t\t\t{\n\t\t\t\t\"name\": \"Cookie\",\n\t\t\t\t\"value\": \"pgv_pvid=977259220; pac_uid=1_917521610; RK=bNrVuDJjGZ; ptcz=cff0fae128e230ac9cbdca6b44c812da07a8a27199142b3856073da30bd7d37f; tvfe_boss_uuid=ba12af7c5a70407c; o_cookie=917521610; iip=0; TSID=fg2om4ff3b0028rpbovnpafde1; pgv_info=ssid=s2914806624; ts_last=om.qq.com/userReg/mediaInfo; ts_uid=6110293192; csrfToken=csrf-1666038340355; appOmDownClose=1; ptui_loginuin=917521610@qq.com; userid=22690801; omaccesstoken=00a8d53ee83b92ec4e3111998ca616ad566b9d6fe80814f1be12d2a5c1e7a267baf531f268514a1be2670c9e98da4549a31b36408ed199c6ccd0e069f62ba65438x0; omtoken=00a8d53ee83b92ec4e3111998ca616ad566b9d6fe80814f1be12d2a5c1e7a267baf531f268514a1be2670c9e98da4549a31b36408ed199c6ccd0e069f62ba65438x0; wxky=1; alertclicked=%7C%7C\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Host\",\n\t\t\t\t\"value\": \"om.qq.com\"",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/upload_img.py:69-82"
    },
    "4735": {
        "file_id": 613,
        "content": "This code represents a request with various headers, including \"Cookie\" header storing multiple QQ session data and tokens, and \"Host\" set to \"om.qq.com\".",
        "type": "comment"
    },
    "4736": {
        "file_id": 613,
        "content": "\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Origin\",\n\t\t\t\t\"value\": \"https://om.qq.com\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Referer\",\n\t\t\t\t\"value\": \"https://om.qq.com/userReg/mediaInfo\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Sec-Fetch-Dest\",\n\t\t\t\t\"value\": \"empty\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Sec-Fetch-Mode\",\n\t\t\t\t\"value\": \"cors\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"Sec-Fetch-Site\",\n\t\t\t\t\"value\": \"same-origin\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"User-Agent\",\n\t\t\t\t\"value\": \"Mozilla/5.0 (X11; Linux x86_64; rv:91.0) Gecko/20100101 Firefox/91.0\"\n\t\t\t}\n\t\t]\nheaders = {item['name']: item['value'] for item in req_headers}\nrespone = requests.post(url, files=files,headers=headers)\nres = respone.json()\nprint(res)",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/upload_img.py:83-112"
    },
    "4737": {
        "file_id": 613,
        "content": "The code sends a POST request with specified headers to the given URL using requests library. It uses the provided headers for various purposes such as origin, referer, fetch destination mode, fetch site, and user agent. The response is then printed after converting it to JSON format.",
        "type": "comment"
    },
    "4738": {
        "file_id": 614,
        "content": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/test_upload_xml_qq.py",
        "type": "filepath"
    },
    "4739": {
        "file_id": 614,
        "content": "The code creates an Action object for QQ messages, handles cover options, and sends XML/JSON messages using `sendFriendXml`/`sendGroupXml`. The \"SendMsgV2\" function sends a QQ message with XML content via a POST request to \"/v1/LuaApiCaller\", including the title, summary, and URL of a music file.",
        "type": "summary"
    },
    "4740": {
        "file_id": 614,
        "content": "from botoy import Action\nqq = 917521610\nport = 8784\naction = Action(qq=qq, port=port, host=\"127.0.0.1\")\nuser = 1281727431\n# but the goddamn xml format is not right.\n# cover = \"http://inews.gtimg.com/newsapp_bt/0/15352117085/640\"\ncover = \"http://pubminishare-30161.picsz.qpic.cn/d4ad36fa-833e-4018-b994-a2da810f2d54\"\n# just need a better cover. i don't know.\n# cover = \"https://i0.hdslb.com/bfs/archive/c5a0d18ee077fb6a4ac0970ccb0a3788e137d14f.jpg\" # works.\n# content = \"\"\"<?xml version='1.0' encoding='UTF-8' standalone='yes'?><msg templateID=\"123\" url=\"https://b23.tv/5K7qh7K?share_medium=android&amp;share_source=qq&amp;bbid=XY46C7C4C74C8D645671EF7E8F4CC7810054A&amp;ts=1657521142233\" serviceID=\"1\" action=\"web\" actionData=\"\" a_actionData=\"\" i_actionData=\"\" brief=\"[QQÂ∞èÁ®ãÂ∫è]ÂìîÂì©ÂìîÂì©\" flag=\"0\"><item layout=\"2\"><picture cover=\"{}\"/><title>ÂìîÂì©ÂìîÂì©</title><summary>„ÄêCËØ≠Ë®Ä„Äë„ÄäÂ∏¶‰Ω†Â≠¶CÂ∏¶‰Ω†È£û„Äã</summary></item><source url=\"https://b23.tv/5K7qh7K?share_medium=android&amp;share_source=qq&amp;bbid=XY46C7C4C74C8D645671EF7E8F4CC7810054A&",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/test_upload_xml_qq.py:1-12"
    },
    "4741": {
        "file_id": 614,
        "content": "The code is creating an Action object with QQ number, port, and host. It also includes a variable for the user, cover image URLs, and a template XML message with specific parameters. The current cover URL seems to be causing issues and there are alternative options provided.",
        "type": "comment"
    },
    "4742": {
        "file_id": 614,
        "content": "amp;ts=1657521142233\" icon=\"https://open.gtimg.cn/open/app_icon/00/95/17/76/100951776_100_m.png?t=1657091104\" name=\"ÂìîÂì©ÂìîÂì©\" appid=\"0\" action=\"web\" actionData=\"\" a_actionData=\"tencent0://\" i_actionData=\"\"/></msg>\"\"\".format(\n    # cover\n# )\n# content = \"\"\"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><msg templateID=\"123\" url=\"https://b23.tv/uHML5mi?share_medium=android&amp;share_source=qq&amp;bbid=XY1BB721B1F97348DBDE4297FE1B4ABE26BAA&amp;ts=1666023406285\" serviceID=\"1\" action=\"web\" actionData=\"\" a_actionData=\"\" i_actionData=\"\" brief=\"[QQÂ∞èÁ®ãÂ∫è]ÂìîÂì©ÂìîÂì©\" flag=\"0\"><item layout=\"2\"><picture cover=\"{}\"/><title>„ÄêAIÂä®Áîª„ÄëÂ¶ÆÈú≤PVÂä®Áîª È£éËΩ¨Êç¢„ÄêNovelAI„Äë</title></item><source url=\"https://b23.tv/uHML5mi?share_medium=android&amp;share_source=qq&amp;bbid=XY1BB721B1F97348DBDE4297FE1B4ABE26BAA&amp;ts=1666023406285\" icon=\"http://miniapp.gtimg.cn/public/appicon/432b76be3a548fc128acaa6c1ec90131_200.jpg\" name=\"ÂìîÂì©ÂìîÂì©\" appid=\"0\" action=\"app\" actionData=\"\" a_actionData=\"tencent0://\" i_actionData=\"\"/></msg>\"\"\".format(cover)\n# i guess, it is just the way it send the data is different.",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/test_upload_xml_qq.py:12-16"
    },
    "4743": {
        "file_id": 614,
        "content": "This code is formatting XML content for a QQ message template, including the URL, app icon, and app name. The code is using string formatting to replace placeholders with actual data before sending it via QQ.",
        "type": "comment"
    },
    "4744": {
        "file_id": 614,
        "content": "# result= action.sendFriendXml(user=user, content=content)\n# print(result)\n# content=\"\"\"{\"app\":\"com.tencent.gamecenter.gameshare\",\"desc\":\"\",\"view\":\"singleImg\",\"ver\":\"0.0.0.0\",\"prompt\":\"ÈÇ™Â∞ëQQXMLËÆ∫Âùõ\",\"appID\":\"\",\"sourceName\":\"\",\"actionData\":\"\",\"actionData_A\":\"\",\"sourceUrl\":\"\",\"meta\":{\"singleImg\":{\"mainImage\":\"https://gchat.qpic.cn/gchatpic_new/3020005669/916530575-2949639428-6E45D21EADE33511C565E25AB432AB59/0?term=2\",\"mainUrl\":\"\"}},\"config\":{\"forward\":1},\"text\":\"\",\"sourceAd\":\"\"}\"\"\"\ngroup = 543780931\n# have error when sending group xml? why?\n# result = action.sendGroupXml(group=group, content=content)\n# successful!\n# this 'com.tencent.structmsg' might be our way. just maybe.\ncontent = \"\"\"{\"app\":\"com.tencent.structmsg\",\"desc\":\"\",\"view\":\"news\",\"ver\":\"0.0.0.1\",\"prompt\":\"ÈÇ™Â∞ëQQXMLËÆ∫Âùõ\",\"appID\":100951776,\"sourceName\":\"\",\"actionData\":\"\",\"actionData_A\":\"\",\"sourceUrl\":\"\",\"meta\":{\"singleImg\":{\"mainImage\":\"https://gchat.qpic.cn/gchatpic_new/3020005669/916530575-2949639428-6E45D21EADE33511C565E25AB432AB59/0?term=2\",\"mainUrl\":\"\"}},\"text\":\"\",\"extraApps\":[],\"sourceAd\":\"\",\"config\":{\"forward\":1}}\"\"\"",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/test_upload_xml_qq.py:17-26"
    },
    "4745": {
        "file_id": 614,
        "content": "This code attempts to send XML messages using the `sendFriendXml` and `sendGroupXml` methods. The first content is intended for individual chats, while the second content is meant for group chats. It encounters an error when sending group XML and suggests that using \"com.tencent.structmsg\" might be a solution.",
        "type": "comment"
    },
    "4746": {
        "file_id": 614,
        "content": "# content = \"\"\"{\"app\":\"com.tencent.gamecenter.gameshare\",\"desc\":\"\",\"view\":\"singleImg\",\"ver\":\"0.0.0.0\",\"prompt\":\"ÈÇ™Â∞ëQQXMLËÆ∫Âùõ\",\"appID\":\"\",\"sourceName\":\"\",\"actionData\":\"\",\"actionData_A\":\"\",\"sourceUrl\":\"\",\"meta\":{\"singleImg\":{\"mainImage\":\"https://gchat.qpic.cn/gchatpic_new/3020005669/916530575-2949639428-6E45D21EADE33511C565E25AB432AB59/0?term=2\",\"mainUrl\":\"\"}},\"text\":\"\",\"extraApps\":[],\"sourceAd\":\"\",\"config\":{\"forward\":1}}\"\"\"\n# content = \"\"\"<?xml version='1.0' encoding='UTF-8' standalone='yes' ?><msg templateID=\"123\" url=\"https://b23.tv/uHML5mi?share_medium=android&amp;share_source=qq&amp;bbid=XY1BB721B1F97348DBDE4297FE1B4ABE26BAA&amp;ts=1666023406285\" serviceID=\"1\" action=\"web\" actionData=\"\" a_actionData=\"\" i_actionData=\"\" brief=\"[QQÂ∞èÁ®ãÂ∫è]ÂìîÂì©ÂìîÂì©\" flag=\"0\"></msg>\"\"\"\nresult = action.sendGroupJson(group=group, content=content)\n# result = action.sendGroupXml(group=group, content=content)\nprint(result)\n# result = action.sendGroupText(group=group,content='test')\n# result = action.sendGroupText(group=group,content=content)",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/test_upload_xml_qq.py:27-33"
    },
    "4747": {
        "file_id": 614,
        "content": "Sending a group message in JSON format, with the option to send in XML format as well. The content variable holds the message data, and the result is the response from sending the message. Printing the result for further use or logging.",
        "type": "comment"
    },
    "4748": {
        "file_id": 614,
        "content": "# funcname = \"SendMsgV2\"\n# content = \"\"\"<?xml version='1.0' encoding='UTF-8' standalone='yes' ?><msg serviceID='1' templateID='1' action='' brief='&#91;Áæ§ÂÉµÂ∞∏‰ªªÂä°&#93;' sourceMsgId='0' url='' flag='2' adverSign='0' multiMsgFlag='0'><item layout='0'><title size='38' color='#9900CC' style='1'>üÜïÂ∑≤ÁªèÂêØÂä®üÜï</title></item><item layout='0'><hr hidden='false' style='0' /></item><item layout='6'><summary color='#FF0033'>1‚É£Ô∏è</summary><summary color='#FF0099'>üí™Ê≠£Âú®Êâ´ÁßíÂÉµÂ∞∏üí™</summary></item><source name='' icon='' action='' appid='-1' /></msg>\"\"\"\n# content = \"\"\"<?xml version='1.0' encoding='UTF-8' standalone='yes' ?><msg serviceID=\"2\" templateID=\"1\" action=\"web\" brief=\"&#91;ÂàÜ‰∫´&#93; ÂçÅÂπ¥\" sourceMsgId=\"0\" url=\"https://i.y.qq.com/v8/playsong.html?_wv=1&amp;songid=4830342&amp;souce=qqshare&amp;source=qqshare&amp;ADTAG=qqshare\" flag=\"0\" adverSign=\"0\" multiMsgFlag=\"0\" ><item layout=\"2\"><audio cover=\"http://imgcache.qq.com/music/photo/album_500/26/500_albumpic_89526_0.jpg\" src=\"http://ws.stream.qqmusic.qq.com/C400003mAan70z",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/test_upload_xml_qq.py:34-36"
    },
    "4749": {
        "file_id": 614,
        "content": "This code defines a function named \"SendMsgV2\" and includes an XML content string. The XML contains message details for QQ messenger, including the service ID, template ID, action, brief, source message ID, URL, flag, adverSign, multiMsgFlag, and item layout. It sets the message title and summary, as well as specifying the URL to share a song from QQ music.",
        "type": "comment"
    },
    "4750": {
        "file_id": 614,
        "content": "Uy5O.m4a?guid=1535153710&amp;vkey=D5315B8C0603653592AD4879A8A3742177F59D582A7A86546E24DD7F282C3ACF81526C76E293E57EA1E42CF19881C561275D919233333ADE&amp;uin=&amp;fromtag=3\" /><title>ÂçÅÂπ¥</title><summary>ÈôàÂ•ïËøÖ</summary></item><source name=\"QQÈü≥‰πê\" icon=\"https://i.gtimg.cn/open/app_icon/01/07/98/56/1101079856_100_m.png\" url=\"http://web.p.qq.com/qqmpmobile/aio/app.html?id=1101079856\" action=\"app\"  a_actionData=\"com.tencent.qqmusic\" i_actionData=\"tencent1101079856://\" appid=\"1101079856\" /></msg>\"\"\"\n# content = \"\"\"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><msg serviceID=\"1\" templateID=\"1\" action=\"\" brief=\"QQÁ∫¢ÂåÖ\" sourceMsgId=\"0\" flag=\"8\" adverSign=\"0\" multiMsgFlag=\"0\"><item layout=\"6\"><title color=\"#EE00EE\" style=\"4\">ÈòøÊ∑±ÁúüÂ∏Ö</title><summary color=\"#9A32CD\">ÊòØ‰∏çÊòØÂæàÊó†ËØ≠</summary><picture cover=\"http://t1.hddhhn.com/uploads/tu/20150507/20405-eBE9jO.jpg\" action=\"web\" url=\"http://url.cn/5g4eOiY\" w=\"0\" h=\"0\"/></item></msg>\"\"\"\n# payload = {\n#     \"ToUserUid\": group,\n#     \"SendToType\": 2,\n#     \"SendMsgType\": \"XmlMsg\",",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/test_upload_xml_qq.py:36-41"
    },
    "4751": {
        "file_id": 614,
        "content": "This code snippet is sending an XML message to QQ with content and media information for a music file. The message includes details such as title, summary, and URL of the music file along with the source name and icon of QQ Music app. It also specifies the action and action data associated with the app.",
        "type": "comment"
    },
    "4752": {
        "file_id": 614,
        "content": "#     \"Content\": content,\n# }\n# result = action.baseRequest(\n#     method=\"POST\",\n#     funcname=funcname,\n#     path=\"/v1/LuaApiCaller\",\n#     params={\"qq\": qq, \"funcname\": funcname},\n#     payload=payload,\n# )\n# print(result)",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/test_upload_xml_qq.py:42-51"
    },
    "4753": {
        "file_id": 614,
        "content": "Sending XML data via POST request to \"/v1/LuaApiCaller\" with QQ number and funcname parameters, then printing the result.",
        "type": "comment"
    },
    "4754": {
        "file_id": 615,
        "content": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/test_upload_get_link.sh",
        "type": "filepath"
    },
    "4755": {
        "file_id": 615,
        "content": "Code navigates to the \"free-img\" directory, sets the PICTURE variable to a specific image path, and runs the Python script \"cli/free-img.py\" with options \"-s gtimg\" and \"-i $PICTURE\", which uploads an image to the \"gtimg\" server using the specified picture.",
        "type": "summary"
    },
    "4756": {
        "file_id": 615,
        "content": "cd free-img\nPICTURE=/root/Desktop/works/pyjom/tests/bilibili_video_recommendation_server/test_cover.jpg\npython3 cli/free-img.py -s gtimg -i $PICTURE",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/test_upload_get_link.sh:1-5"
    },
    "4757": {
        "file_id": 615,
        "content": "Code navigates to the \"free-img\" directory, sets the PICTURE variable to a specific image path, and runs the Python script \"cli/free-img.py\" with options \"-s gtimg\" and \"-i $PICTURE\", which uploads an image to the \"gtimg\" server using the specified picture.",
        "type": "comment"
    },
    "4758": {
        "file_id": 616,
        "content": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/test_launch_share.sh",
        "type": "filepath"
    },
    "4759": {
        "file_id": 616,
        "content": "This code launches the JumpActivity in the Tencent MobileQQ app, passing a complex URI with various data such as file type, file data, title, description, and URL to share. The shared content is related to Bilibili video recommendation server. It specifies the app name and package name (tv.danmaku.bili).",
        "type": "summary"
    },
    "4760": {
        "file_id": 616,
        "content": "am start -n com.tencent.mobileqq/com.tencent.mobileqq.activity.JumpActivity -a android.intent.action.VIEW -d 'mqqapi://share/to_fri?src_type=app&version=1&file_type=news&file_data=L3N0b3JhZ2UvZW11bGF0ZWQvMC9QaWN0dXJlcy9zaGFyZS8xMjcyMDY0MzU0&file_uri=Y29udGVudDovL3R2LmRhbm1ha3UuYmlsaS5maWxlcHJvdmlkZXIvb3BlbnNka19leHRlcm5hbC9zaGFyZTJxcV90ZW1wNDIwOTU0OTNhYjhlZGRhZmYzMWQ1Y2ZjYWYzZjE3MDQuanBn&title=5ZOU5ZOp5ZOU5ZOp&description=5aSn5Z6L5pS/6K6654mH772c5paw5pe25Luj562U5Y23&share_id=100951776&url=aHR0cHM6Ly9iMjMudHYvdGRKZGd6WT9zaGFyZV9tZWRpdW09YW5kcm9pZCZzaGFyZV9zb3VyY2U9cXEmYmJpZD1YWTFCQjcyMUIxRjk3MzQ4REJERTQyOTdGRTFCNEFCRTI2QkFBJnRzPTE2NjcyNzU0ODI4MTY=&app_name=5ZOU5ZOp5ZOU5ZOp&req_type=Nw==&mini_program_appid=MTEwOTkzNzU1Nw==&mini_program_path=cGFnZXMvdmlkZW8vdmlkZW8/YnZpZD1CVjFuZTQxMUw3aHkmc2hhcmVfc291cmNlPXFxX3VnYyZ1bmlxdWVfaz10ZEpkZ3pZ&mini_program_type=Mw==&cflag=MA==&third_sd=dHJ1ZQ==' -e pkg_name tv.danmaku.bili",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/test_launch_share.sh:1-1"
    },
    "4761": {
        "file_id": 616,
        "content": "This code launches the JumpActivity in the Tencent MobileQQ app, passing a complex URI with various data such as file type, file data, title, description, and URL to share. The shared content is related to Bilibili video recommendation server. It specifies the app name and package name (tv.danmaku.bili).",
        "type": "comment"
    },
    "4762": {
        "file_id": 617,
        "content": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/send_friend_xml_and_forward_xml_to_group.py",
        "type": "filepath"
    },
    "4763": {
        "file_id": 617,
        "content": "This code sends QQ messages containing video recommendations or Baidu website links to specific users and groups using XML format, and utilizes the requests library for API calls.",
        "type": "summary"
    },
    "4764": {
        "file_id": 617,
        "content": "cover = \"https://i0.hdslb.com/bfs/archive/c5a0d18ee077fb6a4ac0970ccb0a3788e137d14f.jpg\" # works.\ncontent = \"\"\"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><msg templateID=\"123\" url=\"https://b23.tv/uHML5mi?share_medium=android&amp;share_source=qq&amp;bbid=XY1BB721B1F97348DBDE4297FE1B4ABE26BAA&amp;ts=1666023406285\" serviceID=\"1\" action=\"web\" actionData=\"\" a_actionData=\"\" i_actionData=\"\" brief=\"[QQÂ∞èÁ®ãÂ∫è]ÂìîÂì©ÂìîÂì©\" flag=\"0\"><item layout=\"2\"><picture cover=\"{}\"/><title>„ÄêAIÂä®Áîª„ÄëÂ¶ÆÈú≤PVÂä®Áîª È£éËΩ¨Êç¢„ÄêNovelAI„Äë</title></item><source url=\"https://b23.tv/uHML5mi?share_medium=android&amp;share_source=qq&amp;bbid=XY1BB721B1F97348DBDE4297FE1B4ABE26BAA&amp;ts=1666023406285\" icon=\"http://miniapp.gtimg.cn/public/appicon/432b76be3a548fc128acaa6c1ec90131_200.jpg\" name=\"ÂìîÂì©ÂìîÂì©\" appid=\"0\" action=\"app\" actionData=\"\" a_actionData=\"tencent0://\" i_actionData=\"\"/></msg>\"\"\".format(cover)\nqq = 917521610\nuser = 1281727431\ngroup = 543780931\nbaseUrl = \"http://0.0.0.0:5700\" # the thing is not ready yet.\nimport requests\nurl = baseUrl + \"/send_private_msg\"",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/send_friend_xml_and_forward_xml_to_group.py:1-14"
    },
    "4765": {
        "file_id": 617,
        "content": "This code sends a QQ message with an XML format containing a video recommendation to a specific user and group. The cover image URL is set, the content is a formatted XML string, QQ account IDs are defined, and the base URL for sending the message is specified. The code uses the requests library to send the message to the server.",
        "type": "comment"
    },
    "4766": {
        "file_id": 617,
        "content": "message = '[CQ:share,url=http://baidu.com,title=ÁôæÂ∫¶]'\ndata = {\"user_id\": user, \"message\": message, \"auto_escape\": False}\nr = requests.post(url, data=data)\nprint(r.json())\n# message = \"[CQ:forward,id={}]\".format(291457889)\n# url = baseUrl+\"/send_group_msg\"\n# data = {\"group_id\":group, \"message\": message, \"auto_escape\": False}\n# r = requests.post(url,data=data)\n# print(r.json())",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/send_friend_xml_and_forward_xml_to_group.py:15-27"
    },
    "4767": {
        "file_id": 617,
        "content": "This code sends a message containing a Baidu website link to a specific user using XML format and also includes an option to forward the message with a given ID to a group. The API call is made using requests library, and the response from the server is printed in JSON format.",
        "type": "comment"
    },
    "4768": {
        "file_id": 618,
        "content": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/run_qq_capture.sh",
        "type": "filepath"
    },
    "4769": {
        "file_id": 618,
        "content": "This code sets up a man-in-the-middle (MITM) proxy using MitmProxy, listening on port 8050 and logging all captured traffic to 'qq.log'. It also enables WebSocket stream processing for the 'tv.danmaku.bili' application.",
        "type": "summary"
    },
    "4770": {
        "file_id": 618,
        "content": "mitmproxy --mode socks5 --listen-port 8050 -w qq.log --set stream_websocket=true\n# tv.danmaku.bili",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/run_qq_capture.sh:1-3"
    },
    "4771": {
        "file_id": 618,
        "content": "This code sets up a man-in-the-middle (MITM) proxy using MitmProxy, listening on port 8050 and logging all captured traffic to 'qq.log'. It also enables WebSocket stream processing for the 'tv.danmaku.bili' application.",
        "type": "comment"
    },
    "4772": {
        "file_id": 619,
        "content": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/run_bilibili_qq_share_xml.sh",
        "type": "filepath"
    },
    "4773": {
        "file_id": 619,
        "content": "This code sets up a MitM proxy in Socks5 mode, listens on port 8050, and logs websocket activity for bilibili QQ share feature.",
        "type": "summary"
    },
    "4774": {
        "file_id": 619,
        "content": "mitmproxy --mode socks5 --listen-port 8050 -w bilibili_qq_xml_share.log --set stream_websocket=true\n# tv.danmaku.bili",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/run_bilibili_qq_share_xml.sh:1-3"
    },
    "4775": {
        "file_id": 619,
        "content": "This code sets up a MitM proxy in Socks5 mode, listens on port 8050, and logs websocket activity for bilibili QQ share feature.",
        "type": "comment"
    },
    "4776": {
        "file_id": 620,
        "content": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/qq_gocqhttp_post_xml.py",
        "type": "filepath"
    },
    "4777": {
        "file_id": 620,
        "content": "The code utilizes go-cqhttp and Requests library to send XML-formatted rich media messages, targeting group chats with audio and QQ Music items, requiring a group ID. It allows Python users to send messages containing JSON or XML data to a web URL with dynamic content.",
        "type": "summary"
    },
    "4778": {
        "file_id": 620,
        "content": "baseUrl = \"http://0.0.0.0:5700\"\n# try to send xml to group.\n# ÁßÅËÅäÂèØ‰ª•Âèëxml ‰ΩÜÊòØÁæ§ËÅä‰∏çË°å Áæ§ËÅäÂè™ËÉΩÂèëÂä†ÂØÜÂ•ΩÈ™åËØÅÂ•ΩÁöÑjson\n# cover = \"http://pubminishare-30161.picsz.qpic.cn/d4ad36fa-833e-4018-b994-a2da810f2d54\"\n# content = \"\"\"<?xml version='1.0' encoding='UTF-8' standalone='yes'?><msg templateID=\"123\" url=\"https://b23.tv/5K7qh7K?share_medium=android&amp;share_source=qq&amp;bbid=XY46C7C4C74C8D645671EF7E8F4CC7810054A&amp;ts=1657521142233\" serviceID=\"1\" action=\"web\" actionData=\"\" a_actionData=\"\" i_actionData=\"\" brief=\"[QQÂ∞èÁ®ãÂ∫è]ÂìîÂì©ÂìîÂì©\" flag=\"0\"><item layout=\"2\"><picture cover=\"{}\"/><title>ÂìîÂì©ÂìîÂì©</title><summary>„ÄêCËØ≠Ë®Ä„Äë„ÄäÂ∏¶‰Ω†Â≠¶CÂ∏¶‰Ω†È£û„Äã</summary></item><source url=\"https://b23.tv/5K7qh7K?share_medium=android&amp;share_source=qq&amp;bbid=XY46C7C4C74C8D645671EF7E8F4CC7810054A&amp;ts=1657521142233\" icon=\"https://open.gtimg.cn/open/app_icon/00/95/17/76/100951776_100_m.png?t=1657091104\" name=\"ÂìîÂì©ÂìîÂì©\" appid=\"0\" action=\"web\" actionData=\"\" a_actionData=\"tencent0://\" i_actionData=\"\"/></msg>\"\"\".format(\n# cover)\ngroup = 543780931\nimport requests\nurl = baseUrl + \"/send_group_msg\"",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/qq_gocqhttp_post_xml.py:1-12"
    },
    "4779": {
        "file_id": 620,
        "content": "The code attempts to send an XML message to a group chat using the GOCQHTTP API. The message contains a template with a cover image, title, and summary, promoting a video from Bilibili. The message can only be sent in group chats and not private chats. It uses the base URL \"http://0.0.0.0:5700\" and requires the group ID as input for sending the XML message.",
        "type": "comment"
    },
    "4780": {
        "file_id": 620,
        "content": "# message = 'test'\n# content = \"\"\"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\" ?><msg serviceID=\"2\" templateID=\"1\" action=\"web\" brief=\"\" sourceMsgId=\"0\" url=\"https://qm.qq.com/cgi-bin/qm/qr?k=wyw10nH14NxBzBmM2DZK_bj9y9yX-IJL\" flag=\"0\" adverSign=\"0\" multiMsgFlag=\"0\"><item layout=\"2\"><audio cover=\"https://python3student.github.io/img/avatar.jpg\" src=\"https://music.163.com/song/media/outer/url?id=449818326.mp3\" /><title>Èπø be free</title><summary>„Äé‰ΩúËÄÖ„ÄèÁ•ûÂ•á</summary></item><source name=\"Á•ûÂ•áÊ∞∏ËøúÁöÑÁ•ûÔºÅ\" icon=\"https://python3student.github.io/img/avatar.jpg\" url=\"https://python3student.github.io/img/avatar.jpg\" action=\"app\" a_actionData=\"com.netease.cloudmusic\" i_actionData=\"tencent100495085://\" appid=\"100495085\" /></msg>\"\"\"\n# content = \"\"\"<?xml version='1.0' encoding='UTF-8' standalone='yes' ?><msg serviceID=\"2\" templateID=\"1\" action=\"web\" brief=\"&#91;ÂàÜ‰∫´&#93; ÂçÅÂπ¥\" sourceMsgId=\"0\" url=\"https://i.y.qq.com/v8/playsong.html?_wv=1&amp;songid=4830342&amp;souce=qqshare&amp;source=qqshare&amp;ADTAG=qqsh",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/qq_gocqhttp_post_xml.py:13-15"
    },
    "4781": {
        "file_id": 620,
        "content": "This code is setting a message and content for an XML-formatted message to be sent using the gocqhttp package. The message includes an image, audio, and links to a music source and app ID. It will be used for sending a rich media message with QQ Gocqhttp.",
        "type": "comment"
    },
    "4782": {
        "file_id": 620,
        "content": "are\" flag=\"0\" adverSign=\"0\" multiMsgFlag=\"0\" ><item layout=\"2\"><audio cover=\"http://imgcache.qq.com/music/photo/album_500/26/500_albumpic_89526_0.jpg\" src=\"http://ws.stream.qqmusic.qq.com/C400003mAan70zUy5O.m4a?guid=1535153710&amp;vkey=D5315B8C0603653592AD4879A8A3742177F59D582A7A86546E24DD7F282C3ACF81526C76E293E57EA1E42CF19881C561275D919233333ADE&amp;uin=&amp;fromtag=3\" /><title>ÂçÅÂπ¥</title><summary>ÈôàÂ•ïËøÖ</summary></item><source name=\"QQÈü≥‰πê\" icon=\"https://i.gtimg.cn/open/app_icon/01/07/98/56/1101079856_100_m.png\" url=\"http://web.p.qq.com/qqmpmobile/aio/app.html?id=1101079856\" action=\"app\"  a_actionData=\"com.tencent.qqmusic\" i_actionData=\"tencent1101079856://\" appid=\"1101079856\" /></msg>\"\"\"\n# content = \"\"\"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><msg serviceID=\"1\" templateID=\"1\" action=\"\" brief=\"QQÁ∫¢ÂåÖ\" sourceMsgId=\"0\" flag=\"8\" adverSign=\"0\" multiMsgFlag=\"0\"><item layout=\"6\"><title color=\"#EE00EE\" style=\"4\">ÈòøÊ∑±ÁúüÂ∏Ö</title><summary color=\"#9A32CD\">ÊòØ‰∏çÊòØÂæàÊó†ËØ≠</summary><picture cover=\"http:",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/qq_gocqhttp_post_xml.py:15-16"
    },
    "4783": {
        "file_id": 620,
        "content": "This code is creating an XML string for a QQ goCQHttp message, featuring an audio track and an item from QQ Music. It includes the audio source, title, summary, and source information. The message has a service ID of 1, template ID of 1, and a flag value of 8.",
        "type": "comment"
    },
    "4784": {
        "file_id": 620,
        "content": "//t1.hddhhn.com/uploads/tu/20150507/20405-eBE9jO.jpg\" action=\"web\" url=\"http://url.cn/5g4eOiY\" w=\"0\" h=\"0\"/></item></msg>\"\"\"\n# message = \"[CQ:xml,data={}]\".format(content) # xml thing.\n# content=\"\"\"{\"app\":\"com.tencent.miniapp_01\"&#44;\"desc\":\"ÂìîÂì©ÂìîÂì©\"&#44;\"view\":\"view_8C8E89B49BE609866298ADDFF2DBABA4\"&#44;\"ver\":\"1.0.0.19\"&#44;\"prompt\":\"&#91;QQÂ∞èÁ®ãÂ∫è&#93;ÂìîÂì©ÂìîÂì©\"&#44;\"meta\":{\"detail_1\":{\"appType\":0&#44;\"appid\":\"1109937557\"&#44;\"desc\":\"Appium ÊâãÊú∫ App Ëá™Âä®Âåñ + Python\"&#44;\"gamePoints\":\"\"&#44;\"gamePointsUrl\":\"\"&#44;\"host\":{\"nick\":\"Yukio\"&#44;\"uin\":1281727431}&#44;\"icon\":\"https:\\/\\/open.gtimg.cn\\/open\\/app_icon\\/00\\/95\\/17\\/76\\/100951776_100_m.png?t=1659061321\"&#44;\"preview\":\"pubminishare-30161.picsz.qpic.cn\\/a0b8d306-5b6d-4b27-9539-021a2adcc264\"&#44;\"qqdocurl\":\"https:\\/\\/b23.tv\\/4hWdtET?share_medium=android&amp;share_source=qq&amp;bbid=XY1BB721B1F97348DBDE4297FE1B4ABE26BAA&amp;ts=1665924308147\"&#44;\"scene\":1036&#44;\"shareTemplateData\":{}&#44;\"shareTemplateId\":\"8C8E89B49BE609866298ADDFF2DBABA4\"&#44;\"showLi",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/qq_gocqhttp_post_xml.py:16-18"
    },
    "4785": {
        "file_id": 620,
        "content": "This code is formatting a JSON message with app details, prompt, and other information. It will be used in QQ gocqhttp post XML function.",
        "type": "comment"
    },
    "4786": {
        "file_id": 620,
        "content": "ttleTail\":\"\"&#44;\"title\":\"ÂìîÂì©ÂìîÂì©\"&#44;\"url\":\"m.q.qq.com\\/a\\/s\\/ea6d34b58a6a6209cd5088c436a254de\"}}&#44;\"config\":{\"autoSize\":0&#44;\"ctime\":1665924338&#44;\"forward\":1&#44;\"height\":0&#44;\"token\":\"a2458ec4231b7b8204c717f3a955a9fc\"&#44;\"type\":\"normal\"&#44;\"width\":0}}\"\"\"\ncontent = \"\"\"{\"app\":\"com.tencent.structmsg\"&#44;\"desc\":\"Êñ∞Èóª\"&#44;\"view\":\"news\"&#44;\"ver\":\"0.0.0.1\"&#44;\"prompt\":\"&#91;ÂàÜ‰∫´&#93;ÂìîÂì©ÂìîÂì©\"&#44;\"meta\":{\"news\":{\"action\":\"\"&#44;\"android_pkg_name\":\"\"&#44;\"app_type\":1&#44;\"appid\":100951776&#44;\"ctime\":1666081902&#44;\"desc\":\"Â§ñÂõΩÂçö‰∏ªËã±ÊñáËÆ≤Ëß£Ôºö‰∫åÂçÅÂ§ß‰∏∫‰ªÄ‰πàÂ¶ÇÊ≠§ÈáçË¶ÅÔºü\"&#44;\"jumpUrl\":\"https:\\/\\/b23.tv\\/B64KMQq?share_medium=android&amp;share_source=qq&amp;bbid=XY1BB721B1F97348DBDE4297FE1B4ABE26BAA&amp;ts=1666081860133\"&#44;\"preview\":\"https:\\/\\/pic.ugcimg.cn\\/58a74c8432a80e7e2de612e6e53e37f3\\/jpg1\"&#44;\"source_icon\":\"https:\\/\\/open.gtimg.cn\\/open\\/app_icon\\/00\\/95\\/17\\/76\\/100951776_100_m.png?t=1659061321\"&#44;\"source_url\":\"\"&#44;\"tag\":\"ÂìîÂì©ÂìîÂì©\"&#44;\"title\":\"ÂìîÂì©ÂìîÂì©\"&#44;\"uin\":1281727431}}&#44;\"config\":{\"ctime\":1666081902&#44;\"forward\":true&#44;\"token\":\"d7cc3a93e7c3a9acd1c8662157e3e5fb\"&#44;\"type\":\"normal\"}}\"\"\"",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/qq_gocqhttp_post_xml.py:18-19"
    },
    "4787": {
        "file_id": 620,
        "content": "This code contains two JSON strings representing messages in a chat application. The first message is from QQ and includes title, URL, and config details, while the second message is for sharing news on bilibili and has app, desc, view, ver, prompt, meta (with news info), config details, and more. Both messages contain timestamps, tokens, and forward options.",
        "type": "comment"
    },
    "4788": {
        "file_id": 620,
        "content": "# content = \"\"\"{\"app\":\"com.tencent.structmsg\"&#44;\"desc\":\"Èü≥‰πê\"&#44;\"view\":\"music\"&#44;\"ver\":\"0.0.0.1\"&#44;\"prompt\":\"\"&#44;\"meta\":{}}\"\"\"\n# content = (\n    # \"\"\"{\"app\":\"com.tencent.structmsg\",\"desc\":\"\",\"view\":\"singleImg\",\"ver\":\"0.0.0.1\",\"prompt\":\"ÈÇ™Â∞ëQQXMLËÆ∫Âùõ\",\"appID\":\"\",\"sourceName\":\"\",\"actionData\":\"\",\"actionData_A\":\"\",\"sourceUrl\":\"\",\"meta\":{\"singleImg\":{\"mainImage\":\"https://gchat.qpic.cn/gchatpic_new/3020005669/916530575-2949639428-6E45D21EADE33511C565E25AB432AB59/0?term=2\",\"mainUrl\":\"\"}},\"text\":\"\",\"extraApps\":[],\"sourceAd\":\"\",\"config\":{\"forward\":1}}\"\"\".replace(\n#         \"&\", \"&amp;\"\n#     )\n#     .replace(\",\", \"&#44;\")\n#     .replace(\"[\", \"&#91;\")\n#     .replace(\"]\", \"&#93;\")\n# )\n# the token is likely to be some checksum, md5 or something. some aes/rsa?\nmessage = \"[CQ:json,data={}]\".format(content)  # json thing.\n# message = \"[CQ:tts,text=Âò§Âò§Âò§]\"\n# content = \"\"\"<?xml version='1.0' encoding='UTF-8' standalone='yes' ?><msg serviceID=\"2\" templateID=\"1\" action=\"web\" brief=\"&#91;ÂàÜ‰∫´&#93; ÂçÅÂπ¥\" sourceMsgId=\"0\"",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/qq_gocqhttp_post_xml.py:20-34"
    },
    "4789": {
        "file_id": 620,
        "content": "This code is likely related to a messaging application and involves sending messages containing XML or JSON data, possibly for a chat bot or communication tool. It includes functions for formatting the message content and converting it into CQ:json or CQ:tts formats. The content of the messages seems to be dynamic and can contain various types of data like app information, descriptions, images, and text prompts.",
        "type": "comment"
    },
    "4790": {
        "file_id": 620,
        "content": " url=\"http://music.163.com/m/song/409650368\" flag=\"0\" adverSign=\"0\" multiMsgFlag=\"0\" ><item layout=\"2\"><audio cover=\"http://p2.music.126.net/g-Qgb9ibk9Wp_0HWra0xQQ==/16636710440565853.jpg?param=90y90\" src=\"https://music.163.com/song/media/outer/url?id=409650368.mp3\" /><title>ÂçÅÂπ¥</title><summary>ÈªÑÊ¢¶‰πã</summary></item><source name=\"ÁΩëÊòì‰∫ëÈü≥‰πê\" icon=\"https://pic.rmb.bdstatic.com/911423bee2bef937975b29b265d737b3.png\" url=\"http://web.p.qq.com/qqmpmobile/aio/app.html?id=1101079856\" action=\"app\" a_actionData=\"com.netease.cloudmusic\" i_actionData=\"tencent100495085://\" appid=\"100495085\" /></msg>\"\"\"\n# message = '[CQ:xml,data={}]'.format(content)\ndata = {\"group_id\": group, \"message\": message, \"auto_escape\": False}\nr = requests.post(url, data=data)\nprint(r.json())\n# cannot send json. wtf?\n# ËØ∑ÂèÇËÄÉ go-cqhttp Á´ØËæìÂá∫",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/qq_gocqhttp_post_xml.py:34-40"
    },
    "4791": {
        "file_id": 620,
        "content": "The code is constructing an XML message and sending it to a web URL using the Requests library in Python. It uses go-cqhttp for communication, and the code includes a group ID and a message formatted as XML data. The response from the server is printed in JSON format.",
        "type": "comment"
    },
    "4792": {
        "file_id": 621,
        "content": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/print_xml_message.py",
        "type": "filepath"
    },
    "4793": {
        "file_id": 621,
        "content": "The given code uses the xmltodict library to parse an XML message containing Bilibili video sharing information, then prints its details. The \"print_xml_message\" function handles exceptions during parsing and printing.",
        "type": "summary"
    },
    "4794": {
        "file_id": 621,
        "content": "# arc_share\nxml_msg='{\"Content\":\"\\\\u003c?xml version=\\'1.0\\' encoding=\\'UTF-8\\' standalone=\\'yes\\'?\\\\u003e\\\\u003cmsg templateID=\\\\\"123\\\\\" url=\\\\\"https://b23.tv/5K7qh7K?share_medium=android\\\\u0026amp;share_source=qq\\\\u0026amp;bbid=XY46C7C4C74C8D645671EF7E8F4CC7810054A\\\\u0026amp;ts=1657521142233\\\\\" serviceID=\\\\\"1\\\\\" action=\\\\\"web\\\\\" actionData=\\\\\"\\\\\" a_actionData=\\\\\"\\\\\" i_actionData=\\\\\"\\\\\" brief=\\\\\"[QQÂ∞èÁ®ãÂ∫è]ÂìîÂì©ÂìîÂì©\\\\\" flag=\\\\\"0\\\\\"\\\\u003e\\\\u003citem layout=\\\\\"2\\\\\"\\\\u003e\\\\u003cpicture cover=\\\\\"http://pubminishare-30161.picsz.qpic.cn/d4ad36fa-833e-4018-b994-a2da810f2d54\\\\\"/\\\\u003e\\\\u003ctitle\\\\u003eÂìîÂì©ÂìîÂì©\\\\u003c/title\\\\u003e\\\\u003csummary\\\\u003e„ÄêCËØ≠Ë®Ä„Äë„ÄäÂ∏¶‰Ω†Â≠¶CÂ∏¶‰Ω†È£û„Äã\\\\u003c/summary\\\\u003e\\\\u003c/item\\\\u003e\\\\u003csource url=\\\\\"https://b23.tv/5K7qh7K?share_medium=android\\\\u0026amp;share_source=qq\\\\u0026amp;bbid=XY46C7C4C74C8D645671EF7E8F4CC7810054A\\\\u0026amp;ts=1657521142233\\\\\" icon=\\\\\"https://open.gtimg.cn/open/app_icon/00/95/17/76/100951776_100_m.png?t=1657091104\\\\\" name=\\\\\"ÂìîÂì©ÂìîÂì©\\\\\" appid=\\\\\"0\\\\\" action=\\",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/print_xml_message.py:1-2"
    },
    "4795": {
        "file_id": 621,
        "content": "This code represents an XML message with various attributes and data for sharing a Bilibili video on QQ. It contains the template ID, URL to share the video, service ID, action type and data, brief description of the shared content, and more specific details about the item being shared, such as its cover image and title.",
        "type": "comment"
    },
    "4796": {
        "file_id": 621,
        "content": "\\\"web\\\\\" actionData=\\\\\"\\\\\" a_actionData=\\\\\"tencent0://\\\\\" i_actionData=\\\\\"\\\\\"/\\\\u003e\\\\u003c/msg\\\\u003e\"}'\ncontentDict = eval(xml_msg)\ncontent = contentDict['Content']\nprint(content) # let's understand this shit.\n\"\"\"\n<?xml version='1.0' encoding='UTF-8' standalone='yes'?><msg templateID=\"123\" url=\"https://b23.tv/5K7qh7K?share_medium=android&amp;share_source=qq&amp;bbid=XY46C7C4C74C8D645671EF7E8F4CC7810054A&amp;ts=1657521142233\" serviceID=\"1\" action=\"web\" actionData=\"\" a_actionData=\"\" i_actionData=\"\" brief=\"[QQÂ∞èÁ®ãÂ∫è]ÂìîÂì©ÂìîÂì©\" flag=\"0\"><item layout=\"2\"><picture cover=\"http://pubminishare-30161.picsz.qpic.cn/d4ad36fa-833e-4018-b994-a2da810f2d54\"/><title>ÂìîÂì©ÂìîÂì©</title><summary>„ÄêCËØ≠Ë®Ä„Äë„ÄäÂ∏¶‰Ω†Â≠¶CÂ∏¶‰Ω†È£û„Äã</summary></item><source url=\"https://b23.tv/5K7qh7K?share_medium=android&amp;share_source=qq&amp;bbid=XY46C7C4C74C8D645671EF7E8F4CC7810054A&amp;ts=1657521142233\" icon=\"https://open.gtimg.cn/open/app_icon/00/95/17/76/100951776_100_m.png?t=1657091104\" name=\"ÂìîÂì©ÂìîÂì©\" appid=\"0\" action=\"web\" actionData=\"\" a_actionData=\"tencent0://\" i_actionData=\"\"/></msg>",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/print_xml_message.py:2-9"
    },
    "4797": {
        "file_id": 621,
        "content": "This code is parsing an XML message, specifically for QQ share, extracting the content and printing it. The message contains information about a video recommendation from Bilibili, including title, summary, URL, and more.",
        "type": "comment"
    },
    "4798": {
        "file_id": 621,
        "content": "\"\"\"",
        "type": "code",
        "location": "/tests/bilibili_video_recommendation_server/xml_and_json_qq_send/print_xml_message.py:11-11"
    },
    "4799": {
        "file_id": 621,
        "content": "The code defines a function called \"print_xml_message\" that takes in an XML message and prints it. It uses the xmltodict library to parse the XML message into a Python dictionary format, then iterates over each element in the dictionary and prints its text content. The code also handles any potential exceptions that may occur during parsing or printing of the XML message.",
        "type": "comment"
    }
}